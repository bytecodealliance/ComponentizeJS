import{log as e,error as t}from"../console.js";const r=e=>WebAssembly.compile("undefined"!=typeof Buffer?Buffer.from(e,"base64"):Uint8Array.from(atob(e),(e=>e.charCodeAt(0))));class ComponentError extends Error{constructor(e){const t="string"!=typeof e;super(t?e+""+" (see error.payload)":e),Object.defineProperty(this,"payload",{value:e,enumerable:t})}}let n=new DataView(new ArrayBuffer);const o=e=>n.buffer===e.buffer?n:n=new DataView(e.buffer),i="undefined"!=typeof process&&process.versions&&process.versions.node;let s;const a=WebAssembly.instantiate;function c(){throw new TypeError("invalid variant discriminant for bool")}const A=new TextDecoder,f=new TextEncoder;let l,b,d,p,g,w,u=0;function m(e,t,r){if("string"!=typeof e)throw new TypeError("expected a string");if(0===e.length)return u=0,1;let n=0,o=0,i=0;for(;e.length>0;){o=t(o,n,1,n+e.length),n+=e.length;const{read:s,written:a}=f.encodeInto(e,new Uint8Array(r.buffer,o+i,n-i));i+=a,e=e.slice(s)}return n>i&&(o=t(o,n,1,i)),u=i,o}function y(t,r){const n=t,o=r,i=A.decode(new Uint8Array(d.buffer,n,o));e(i)}function I(e,r){const n=e,o=r,i=A.decode(new Uint8Array(d.buffer,n,o));t(i)}const B={spliceBindings(e,t,r,n){const i=e;let s,a,f;if(null==i)s=0,a=0,f=0;else{s=1,a=m(i,g,d),f=u}const l=t,p=l.byteLength,y=g(0,0,1,1*p),I=new Uint8Array(l.buffer||l,l.byteOffset,1*p);new Uint8Array(d.buffer,y,1*p).set(I);const B=m(r,g,d),h=u,U=n;let v,E,C;if(null==U)v=0,E=0,C=0;else{v=1,E=m(U,g,d),C=u}const k=b["exports#splice-bindings"](s,a,f,y,p,B,h,v,E,C);let x;switch(o(d).getUint8(k+0,!0)){case 0:{const e=o(d).getInt32(k+4,!0),t=o(d).getInt32(k+8,!0),r=new Uint8Array(d.buffer.slice(e,e+1*t)),n=o(d).getInt32(k+12,!0),i=o(d).getInt32(k+16,!0),s=A.decode(new Uint8Array(d.buffer,n,i)),a=o(d).getInt32(k+24,!0),f=o(d).getInt32(k+20,!0),l=[];for(let e=0;e<a;e++){const t=f+28*e,r=o(d).getInt32(t+0,!0),n=o(d).getInt32(t+4,!0),i=A.decode(new Uint8Array(d.buffer,r,n)),s=o(d).getInt32(t+12,!0),a=o(d).getInt32(t+8,!0),b=[];for(let e=0;e<s;e++){const t=a+1*e;let r;switch(o(d).getUint8(t+0,!0)){case 0:r="i32";break;case 1:r="i64";break;case 2:r="f32";break;case 3:r="f64";break;default:throw new TypeError("invalid discriminant specified for CoreTy")}b.push(r)}let p;switch(o(d).getUint8(t+16,!0)){case 0:p=null;break;case 1:{let e;switch(o(d).getUint8(t+17,!0)){case 0:e="i32";break;case 1:e="i64";break;case 2:e="f32";break;case 3:e="f64";break;default:throw new TypeError("invalid discriminant specified for CoreTy")}p=e;break}default:throw new TypeError("invalid variant discriminant for option")}const g=o(d).getUint8(t+18,!0),w=o(d).getUint8(t+24,!0);l.push([i,{params:b,ret:p,retptr:0!=g&&(1==g||c()),retsize:o(d).getInt32(t+20,!0)>>>0,paramptr:0!=w&&(1==w||c())}])}const b=o(d).getInt32(k+32,!0),p=o(d).getInt32(k+28,!0),g=[];for(let e=0;e<b;e++){const t=p+16*e,r=o(d).getInt32(t+0,!0),n=o(d).getInt32(t+4,!0),i=A.decode(new Uint8Array(d.buffer,r,n)),s=o(d).getInt32(t+8,!0),a=o(d).getInt32(t+12,!0),c=A.decode(new Uint8Array(d.buffer,s,a));g.push([i,c])}const w=o(d).getInt32(k+40,!0),u=o(d).getInt32(k+36,!0),m=[];for(let e=0;e<w;e++){const t=u+16*e,r=o(d).getInt32(t+0,!0),n=o(d).getInt32(t+4,!0),i=A.decode(new Uint8Array(d.buffer,r,n)),s=o(d).getInt32(t+12,!0),a=o(d).getInt32(t+8,!0),c=[];for(let e=0;e<s;e++){const t=a+8*e,r=o(d).getInt32(t+0,!0),n=o(d).getInt32(t+4,!0),i=A.decode(new Uint8Array(d.buffer,r,n));c.push(i)}m.push([i,c])}x={tag:"ok",val:{wasm:r,jsBindings:s,exports:l,importWrappers:g,imports:m}};break}case 1:{const e=o(d).getInt32(k+4,!0),t=o(d).getInt32(k+8,!0);x={tag:"err",val:A.decode(new Uint8Array(d.buffer,e,t))};break}default:throw new TypeError("invalid variant discriminant for expected")}if(w(k),"err"===x.tag)throw new ComponentError(x.val);return x.val}};export{B as exports};const h=(async()=>{const e=async function(e){return i?(s=s||await import("fs/promises"),WebAssembly.compile(await s.readFile(e))):fetch(e).then(WebAssembly.compileStreaming)}(new URL("./spidermonkey-embedding-splicer.core.wasm",import.meta.url)),t=r("AGFzbQEAAAABBgFgAn9/AAMDAgAABAUBcAECAgcUAwEwAAABMQABCCRpbXBvcnRzAQAKGQILACAAIAFBABEAAAsLACAAIAFBAREAAAsALQlwcm9kdWNlcnMBDHByb2Nlc3NlZC1ieQENd2l0LWNvbXBvbmVudAUwLjguMgBLBG5hbWUAExJ3aXQtY29tcG9uZW50OnNoaW0BLwIAFGluZGlyZWN0LWNvbnNvbGUtbG9nARZpbmRpcmVjdC1jb25zb2xlLWVycm9y"),n=r("AGFzbQEAAAABBgFgAn9/AAIaAwABMAAAAAExAAAACCRpbXBvcnRzAXABAgIJCAEAQQALAgABAC0JcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBDXdpdC1jb21wb25lbnQFMC44LjIAHARuYW1lABUUd2l0LWNvbXBvbmVudDpmaXh1cHM");Promise.all([e,t,n]).catch((()=>{})),({exports:l}=await a(await t)),({exports:b}=await a(await e,{console:{error:l[1],log:l[0]}})),d=b.memory,({exports:p}=await a(await n,{"":{$imports:l.$imports,0:y,1:I}})),g=b.cabi_realloc,w=b["cabi_post_exports#splice-bindings"]})();await h;